<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join</title>
    <link rel="stylesheet" href="style.css">
    <script src="project_join.js"></script> 
</head>
<body>
    <header>
        <h1>Turn _ your taste</h1>
    </header>
    <h1>Join</h1>
    <fieldset>
        <legend>개인 정보</legend>
        <ul>
            <li>
                <label for="id">ID</label>
                <input type="text" id="id" name="id">
            </li>
            <li>
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email">
            </li>
            <li>
                <label for="pw">PW</label>
                <input type="password" id="pw" name="pw">
            </li>  
        </ul>
    </fieldset>
    <fieldset id="naviButtons">
        <button id="userJoin" type="button">JOIN</button>
        <button id="home" type="button" onclick="location.href='project.html'">HOME</button>
    </fieldset>
    <script>
        let userJoin = getCookie("userJoin");

        let joinButton = document.getElementById("userJoin");

        joinButton.addEventListener("click", function() {
            let id = document.getElementById("id").value;
            let email = document.getElementById("email").value;
            let pw = document.getElementById("pw").value;

            console.log("ID:", id, "Email:", email, "PW:", pw);

            // 빈칸 있을 시에 알림
            if (!id || !email || !pw) {
                alert("모든 사용자 정보를 입력해 주세요.");
            } else {
                // UserJoin에 넘겨줘서 쿠키에 저장
                console.log("UserJoin start");
                UserJoin(id, email, pw);
                
                let userinfo = getUserInfo(id, pw);
                if (userinfo != null) {
                    alert("환영합니다 " + userinfo[0] + "님!");
                    window.location.href = "./project_Login.html";
                }
            }
        });
    </script>
</body>
</html>